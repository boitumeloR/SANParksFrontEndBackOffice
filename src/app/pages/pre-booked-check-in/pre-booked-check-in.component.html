<h1>Pre Booked Check In</h1>

<div class="book-form">
  <form [formGroup]="bookingForm">
    <div class="example-container">
      <mat-form-field hintLabel="Max 10 characters" appearance="fill">
        <mat-label>Booking Reference Number</mat-label>
        <input type="number" matInput #input maxlength="20" placeholder="Ex. Nougat" formControlName = "bookingID">
        <mat-hint align="end">{{input.value?.length || 0}}/20</mat-hint>
      </mat-form-field>
      <button mat-raised-button color="primary"
      [disabled]="bookingForm.valid ? false: true"
      (click)="SearchBooking()"
      >Search Booking</button>
  </div>
  </form>

</div>

<div *ngIf="generated">
  <mat-list>
    <div mat-subheader> Booking Details</div>
    <mat-list-item>
        <mat-icon mat-list-icon></mat-icon>
        Reference Number: {{checkData.BookingID}}
      </mat-list-item>
    <mat-list-item>
      <mat-icon mat-list-icon></mat-icon>
      Park: {{checkData.ParkName}}
    </mat-list-item>
    <mat-list-item>
        <mat-icon mat-list-icon></mat-icon>
        Booking Type:  {{checkData.BookingType}}
    </mat-list-item>
    <mat-list-item>
        <mat-icon mat-list-icon></mat-icon>
        Arrival Date: {{ checkData.ArrivalDate | date:  'mediumDate' }}
    </mat-list-item>
        <mat-list-item>
        <mat-icon mat-list-icon></mat-icon>
        Number of Guests: {{checkData.GuestCount}}
    </mat-list-item>
    <mat-divider></mat-divider>
    <div mat-subheader>Client Details</div>
    <mat-list-item>
        <mat-icon mat-list-icon></mat-icon>
        {{client.ClientName}} {{client.ClientSurname}}
    </mat-list-item>
    <mat-list-item>
        <mat-icon mat-list-icon></mat-icon>
        Client ID: {{client.ClientIDCode}} 
    </mat-list-item>
    <mat-list-item>
        <mat-icon mat-list-icon></mat-icon>
        {{client.Address1}} {{client.Address2}} {{client.PostalCode}}
    </mat-list-item>
    <mat-list-item>
      <mat-icon mat-list-icon></mat-icon>
      Wildcard Member: {{hasWildcard}}
    </mat-list-item>
  </mat-list>

<h1>Guests</h1>
<div class="example-container">
</div>
  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource">
      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Guest Name </th>
        <td mat-cell *matCellDef="let element"> {{element.GuestName}} </td>
      </ng-container>

      <!-- Season Column-->
      <ng-container matColumnDef="surname">
        <th mat-header-cell *matHeaderCellDef> Guest Surname</th>
        <td mat-cell *matCellDef="let element"> {{element.GuestSurname}} </td>
      </ng-container>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> Guest ID </th>
        <td mat-cell *matCellDef="let element"> {{element.GuestIDCode}} </td>
      </ng-container>
      <!-- Actions Column -->
      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef> Guest Age</th>
        <td mat-cell *matCellDef="let element"> 
            {{element.GuestAge}}
        </td>
      </ng-container>

      <ng-container matColumnDef="country">
        <th mat-header-cell *matHeaderCellDef> Guest Country</th>
        <td mat-cell *matCellDef="let element"> 
            {{element.CountryName}}
        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-paginator [pageSizeOptions]="[5, 8, 20]" showFirstLastButtons></mat-paginator>
  </div>

  <div class="center" *ngIf="!conservationFeePaid && !hasWildcard">
    <h1>Total Due: {{conservationAmount}}</h1>
    <button mat-raised-button color="accent" (click)="MakePayment()">Make Payment</button>
  </div>

<div class="submit">
    <button mat-raised-button color="primary" *ngIf="hasWildcard || conservationFeePaid" (click)="Submit()">Check In</button>
</div>
</div>

